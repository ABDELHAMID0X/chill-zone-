import { isPlatformBrowser } from '@angular/common';
import { Component, ContentChildren, Input, Output, ViewChild, EventEmitter, ChangeDetectionStrategy, Inject, PLATFORM_ID } from '@angular/core';
import { NgxSplideSlideComponent } from './ngx-splide-slide.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class NgxSplideComponent {
    constructor(cdr, platformId) {
        this.cdr = cdr;
        this.platformId = platformId;
        this.selectedSlideIndexChange = new EventEmitter();
        this.options = {};
        this.containerClass = '';
        this.onInit = new EventEmitter();
        this.onSplideEvent = new EventEmitter();
        this.onMounted = new EventEmitter();
        this.onUpdated = new EventEmitter();
        this.onMove = new EventEmitter();
        this.onMoved = new EventEmitter();
        this.onDrag = new EventEmitter();
        this.onDragged = new EventEmitter();
        this.onVisible = new EventEmitter();
        this.onHidden = new EventEmitter();
        this.onActive = new EventEmitter();
        this.onInactive = new EventEmitter();
        this.onClick = new EventEmitter();
        this.onArrowsMounted = new EventEmitter();
        this.onArrowsUpdated = new EventEmitter();
        this.onPaginationMounted = new EventEmitter();
        this.onPaginationUpdated = new EventEmitter();
        this.onNavigationMounted = new EventEmitter();
        this.onAutoplayPlay = new EventEmitter();
        this.onAutoplayPause = new EventEmitter();
        this.onAutoplayPlaying = new EventEmitter();
        this.onLazyloadLoaded = new EventEmitter();
    }
    ngAfterViewInit() {
        if (!isPlatformBrowser(this.platformId)) {
            return;
        }
        this.splide = new Splide(this.splideElement.nativeElement, this.options);
        if (this.syncWith) {
            this.splide.sync(this.syncWith.getSplideInstance());
        }
        this.onInit.emit(this.splide);
        this.mountSplideInstance();
        const slidesSubscription = this.slides.changes
            .subscribe((list) => {
            this.cdr.detectChanges();
            setTimeout(() => {
                this.remountSplideInstance();
            });
        });
        this.cdr.detectChanges();
    }
    ngOnChanges(changes) {
        if (!this.splide) {
            return;
        }
        if (changes['selectedSlideIndex']) {
            const currentIndex = changes['selectedSlideIndex'].currentValue;
            if (currentIndex !== this.splide.index) {
                this.splide.go(currentIndex);
            }
        }
        if (changes['options']) {
            this.splide.options = changes['options'].currentValue;
        }
    }
    addEventListeners() {
        this.splide
            .on('mounted', (...args) => {
            this.onMounted.emit(args);
            this.onSplideEvent.emit({
                name: 'mounted',
                args
            });
        })
            .on('updated', (...args) => {
            this.onUpdated.emit(args);
            this.onSplideEvent.emit({
                name: 'updated',
                args
            });
        })
            .on('move', (newIndex, oldIndex, destIndex) => {
            this.selectedSlideIndexChange.emit(newIndex);
            this.onMove.emit([newIndex, oldIndex, destIndex]);
            this.onSplideEvent.emit({
                name: 'move',
                args: [newIndex, oldIndex, destIndex]
            });
        })
            .on('moved', (...args) => {
            this.onMoved.emit(args);
            this.onSplideEvent.emit({
                name: 'moved',
                args
            });
        })
            .on('drag', (...args) => {
            this.onDrag.emit(args);
            this.onSplideEvent.emit({
                name: 'drag',
                args
            });
        })
            .on('dragged', (...args) => {
            this.onDragged.emit(args);
            this.onSplideEvent.emit({
                name: 'dragged',
                args
            });
        })
            .on('visible', (...args) => {
            this.onVisible.emit(args);
            this.onSplideEvent.emit({
                name: 'visible',
                args
            });
        })
            .on('hidden', (...args) => {
            this.onHidden.emit(args);
            this.onSplideEvent.emit({
                name: 'hidden',
                args
            });
        })
            .on('active', (...args) => {
            this.onActive.emit(args);
            this.onSplideEvent.emit({
                name: 'active',
                args
            });
        })
            .on('inactive', (...args) => {
            this.onInactive.emit(args);
            this.onSplideEvent.emit({
                name: 'inactive',
                args
            });
        })
            .on('click', (...args) => {
            this.onClick.emit(args);
            this.onSplideEvent.emit({
                name: 'click',
                args
            });
        })
            .on('arrows:mounted', (...args) => {
            this.onArrowsMounted.emit(args);
            this.onSplideEvent.emit({
                name: 'arrows:mounted',
                args
            });
        })
            .on('arrows:updated', (...args) => {
            this.onArrowsUpdated.emit(args);
            this.onSplideEvent.emit({
                name: 'arrows:updated',
                args
            });
        })
            .on('pagination:mounted', (...args) => {
            this.onPaginationMounted.emit(args);
            this.onSplideEvent.emit({
                name: 'pagination:mounted',
                args
            });
        })
            .on('pagination:updated', (...args) => {
            this.onPaginationUpdated.emit(args);
            this.onSplideEvent.emit({
                name: 'pagination:updated',
                args
            });
        })
            .on('navigation:mounted', (...args) => {
            this.onNavigationMounted.emit(args);
            this.onSplideEvent.emit({
                name: 'navigation:mounted',
                args
            });
        })
            .on('autoplay:play', (...args) => {
            this.onAutoplayPlay.emit(args);
            this.onSplideEvent.emit({
                name: 'autoplay:play',
                args
            });
        })
            .on('autoplay:pause', (...args) => {
            this.onAutoplayPause.emit(args);
            this.onSplideEvent.emit({
                name: 'autoplay:pause',
                args
            });
        })
            .on('autoplay:playing', (...args) => {
            this.onAutoplayPlaying.emit(args);
            this.onSplideEvent.emit({
                name: 'autoplay:playing',
                args
            });
        })
            .on('lazyload:loaded', (...args) => {
            this.onLazyloadLoaded.emit(args);
            this.onSplideEvent.emit({
                name: 'lazyload:loaded',
                args
            });
        });
    }
    getSplideInstance() {
        return this.splide;
    }
    mountSplideInstance() {
        this.splide.mount();
        this.addEventListeners();
    }
    remountSplideInstance() {
        console.log('remountSplideInstance');
        this.splide.destroy();
        this.mountSplideInstance();
    }
    ngOnDestroy() {
        if (this.splide) {
            this.splide.destroy(true);
        }
    }
}
NgxSplideComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: NgxSplideComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Component });
NgxSplideComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: NgxSplideComponent, selector: "splide", inputs: { selectedSlideIndex: "selectedSlideIndex", options: "options", containerClass: "containerClass", syncWith: "syncWith" }, outputs: { selectedSlideIndexChange: "selectedSlideIndexChange", onInit: "onInit", onSplideEvent: "onSplideEvent", onMounted: "onMounted", onUpdated: "onUpdated", onMove: "onMove", onMoved: "onMoved", onDrag: "onDrag", onDragged: "onDragged", onVisible: "onVisible", onHidden: "onHidden", onActive: "onActive", onInactive: "onInactive", onClick: "onClick", onArrowsMounted: "onArrowsMounted", onArrowsUpdated: "onArrowsUpdated", onPaginationMounted: "onPaginationMounted", onPaginationUpdated: "onPaginationUpdated", onNavigationMounted: "onNavigationMounted", onAutoplayPlay: "onAutoplayPlay", onAutoplayPause: "onAutoplayPause", onAutoplayPlaying: "onAutoplayPlaying", onLazyloadLoaded: "onLazyloadLoaded" }, queries: [{ propertyName: "slides", predicate: NgxSplideSlideComponent }], viewQueries: [{ propertyName: "splideElement", first: true, predicate: ["splideElement"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div #splideElement class=\"splide\" [ngClass]=\"containerClass\">\r\n    <div class=\"splide__track\">\r\n        <div class=\"splide__list\">\r\n            <div class=\"splide__slide\" *ngFor=\"let slide of slides;\">\r\n                <ng-template *ngIf=\"slide.slideContent\" [ngTemplateOutlet]=\"slide.slideContent\"></ng-template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n", directives: [{ type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: NgxSplideComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'splide',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    templateUrl: './ngx-splide.component.html'
                }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [PLATFORM_ID]
                }] }]; }, propDecorators: { selectedSlideIndex: [{
                type: Input
            }], selectedSlideIndexChange: [{
                type: Output
            }], options: [{
                type: Input
            }], containerClass: [{
                type: Input
            }], syncWith: [{
                type: Input
            }], onInit: [{
                type: Output
            }], onSplideEvent: [{
                type: Output
            }], onMounted: [{
                type: Output
            }], onUpdated: [{
                type: Output
            }], onMove: [{
                type: Output
            }], onMoved: [{
                type: Output
            }], onDrag: [{
                type: Output
            }], onDragged: [{
                type: Output
            }], onVisible: [{
                type: Output
            }], onHidden: [{
                type: Output
            }], onActive: [{
                type: Output
            }], onInactive: [{
                type: Output
            }], onClick: [{
                type: Output
            }], onArrowsMounted: [{
                type: Output
            }], onArrowsUpdated: [{
                type: Output
            }], onPaginationMounted: [{
                type: Output
            }], onPaginationUpdated: [{
                type: Output
            }], onNavigationMounted: [{
                type: Output
            }], onAutoplayPlay: [{
                type: Output
            }], onAutoplayPause: [{
                type: Output
            }], onAutoplayPlaying: [{
                type: Output
            }], onLazyloadLoaded: [{
                type: Output
            }], slides: [{
                type: ContentChildren,
                args: [NgxSplideSlideComponent]
            }], splideElement: [{
                type: ViewChild,
                args: ['splideElement']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNwbGlkZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtc3BsaWRlL3NyYy9saWIvbmd4LXNwbGlkZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtc3BsaWRlL3NyYy9saWIvbmd4LXNwbGlkZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNwRCxPQUFPLEVBRUgsU0FBUyxFQUNULGVBQWUsRUFFZixLQUFLLEVBQXdCLE1BQU0sRUFFbkMsU0FBUyxFQUFFLFlBQVksRUFBRSx1QkFBdUIsRUFBcUIsTUFBTSxFQUFFLFdBQVcsRUFDM0YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7OztBQVN2RSxNQUFNLE9BQU8sa0JBQWtCO0lBc0MzQixZQUFvQixHQUFzQixFQUErQixVQUFlO1FBQXBFLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBQStCLGVBQVUsR0FBVixVQUFVLENBQUs7UUFuQzlFLDZCQUF3QixHQUFHLElBQUksWUFBWSxFQUFVLENBQUM7UUFFdkQsWUFBTyxHQUFRLEVBQUUsQ0FBQztRQUNsQixtQkFBYyxHQUFXLEVBQUUsQ0FBQztRQUczQixXQUFNLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNqQyxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFeEMsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDL0IsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDL0IsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDNUIsWUFBTyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDN0IsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7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b3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gICAgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIENvbXBvbmVudCxcclxuICAgIENvbnRlbnRDaGlsZHJlbixcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBJbnB1dCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE91dHB1dCxcclxuICAgIFF1ZXJ5TGlzdCwgU2ltcGxlQ2hhbmdlcyxcclxuICAgIFZpZXdDaGlsZCwgRXZlbnRFbWl0dGVyLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdCwgUExBVEZPUk1fSURcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTmd4U3BsaWRlU2xpZGVDb21wb25lbnQgfSBmcm9tICcuL25neC1zcGxpZGUtc2xpZGUuY29tcG9uZW50JztcclxuXHJcbmRlY2xhcmUgdmFyIFNwbGlkZTogYW55O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3NwbGlkZScsXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9uZ3gtc3BsaWRlLmNvbXBvbmVudC5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgTmd4U3BsaWRlQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3lcclxue1xyXG4gICAgQElucHV0KCkgc2VsZWN0ZWRTbGlkZUluZGV4OiBudW1iZXI7XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0ZWRTbGlkZUluZGV4Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcblxyXG4gICAgQElucHV0KCkgb3B0aW9uczogYW55ID0ge307XHJcbiAgICBASW5wdXQoKSBjb250YWluZXJDbGFzczogc3RyaW5nID0gJyc7XHJcbiAgICBASW5wdXQoKSBzeW5jV2l0aDogTmd4U3BsaWRlQ29tcG9uZW50O1xyXG5cclxuICAgIEBPdXRwdXQoKSBvbkluaXQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSBvblNwbGlkZUV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgQE91dHB1dCgpIG9uTW91bnRlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBvblVwZGF0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25Nb3ZlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIG9uTW92ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25EcmFnID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIG9uRHJhZ2dlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBvblZpc2libGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25IaWRkZW4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25BY3RpdmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25JbmFjdGl2ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBvbkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIG9uQXJyb3dzTW91bnRlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBvbkFycm93c1VwZGF0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25QYWdpbmF0aW9uTW91bnRlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBvblBhZ2luYXRpb25VcGRhdGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIG9uTmF2aWdhdGlvbk1vdW50ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25BdXRvcGxheVBsYXkgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgb25BdXRvcGxheVBhdXNlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIG9uQXV0b3BsYXlQbGF5aW5nID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIG9uTGF6eWxvYWRMb2FkZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZHJlbihOZ3hTcGxpZGVTbGlkZUNvbXBvbmVudCkgcHVibGljIHNsaWRlczogUXVlcnlMaXN0PE5neFNwbGlkZVNsaWRlQ29tcG9uZW50PjtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdzcGxpZGVFbGVtZW50Jykgc3BsaWRlRWxlbWVudDogRWxlbWVudFJlZjtcclxuICAgIHByb3RlY3RlZCBzcGxpZGU7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLCBASW5qZWN0KFBMQVRGT1JNX0lEKSBwcml2YXRlIHBsYXRmb3JtSWQ6IGFueSkgeyB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWRcclxuICAgIHtcclxuICAgICAgICBpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGxpZGUgPSBuZXcgU3BsaWRlKHRoaXMuc3BsaWRlRWxlbWVudC5uYXRpdmVFbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zeW5jV2l0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGlkZS5zeW5jKHRoaXMuc3luY1dpdGguZ2V0U3BsaWRlSW5zdGFuY2UoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm9uSW5pdC5lbWl0KHRoaXMuc3BsaWRlKTtcclxuICAgICAgICB0aGlzLm1vdW50U3BsaWRlSW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2xpZGVzU3Vic2NyaXB0aW9uID0gdGhpcy5zbGlkZXMuY2hhbmdlc1xyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChsaXN0OiBRdWVyeUxpc3Q8Tmd4U3BsaWRlU2xpZGVDb21wb25lbnQ+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdW50U3BsaWRlSW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuXHJcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNwbGlkZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlc1snc2VsZWN0ZWRTbGlkZUluZGV4J10pIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gY2hhbmdlc1snc2VsZWN0ZWRTbGlkZUluZGV4J10uY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ICE9PSB0aGlzLnNwbGlkZS5pbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpZGUuZ28oY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ29wdGlvbnMnXSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGlkZS5vcHRpb25zID0gY2hhbmdlc1snb3B0aW9ucyddLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc3BsaWRlXHJcbiAgICAgICAgICAgIC5vbignbW91bnRlZCcsICggLi4uYXJncyApID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb3VudGVkLmVtaXQoYXJncyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21vdW50ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ3VwZGF0ZWQnLCAoIC4uLmFyZ3MgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVXBkYXRlZC5lbWl0KGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNwbGlkZUV2ZW50LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1cGRhdGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdtb3ZlJywgKG5ld0luZGV4LCBvbGRJbmRleCwgZGVzdEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2xpZGVJbmRleENoYW5nZS5lbWl0KG5ld0luZGV4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb3ZlLmVtaXQoWyBuZXdJbmRleCwgb2xkSW5kZXgsIGRlc3RJbmRleCBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21vdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFsgbmV3SW5kZXgsIG9sZEluZGV4LCBkZXN0SW5kZXggXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbignbW92ZWQnLCAoIC4uLmFyZ3MgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTW92ZWQuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21vdmVkJyxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdkcmFnJywgKCAuLi5hcmdzICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyYWcuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2RyYWcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ2RyYWdnZWQnLCAoIC4uLmFyZ3MgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRHJhZ2dlZC5lbWl0KGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub25TcGxpZGVFdmVudC5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZHJhZ2dlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbigndmlzaWJsZScsICggLi4uYXJncyApID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25WaXNpYmxlLmVtaXQoYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNwbGlkZUV2ZW50LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2aXNpYmxlJyxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdoaWRkZW4nLCAoIC4uLmFyZ3MgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSGlkZGVuLmVtaXQoYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNwbGlkZUV2ZW50LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ2FjdGl2ZScsICggLi4uYXJncyApID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25BY3RpdmUuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FjdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbignaW5hY3RpdmUnLCAoIC4uLmFyZ3MgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5hY3RpdmUuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2luYWN0aXZlJyxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICggLi4uYXJncyApID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25DbGljay5lbWl0KGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub25TcGxpZGVFdmVudC5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ2Fycm93czptb3VudGVkJywgKCAuLi5hcmdzICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkFycm93c01vdW50ZWQuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2Fycm93czptb3VudGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdhcnJvd3M6dXBkYXRlZCcsICggLi4uYXJncyApID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25BcnJvd3NVcGRhdGVkLmVtaXQoYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNwbGlkZUV2ZW50LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhcnJvd3M6dXBkYXRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbigncGFnaW5hdGlvbjptb3VudGVkJywgKCAuLi5hcmdzICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblBhZ2luYXRpb25Nb3VudGVkLmVtaXQoYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNwbGlkZUV2ZW50LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwYWdpbmF0aW9uOm1vdW50ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ3BhZ2luYXRpb246dXBkYXRlZCcsICggLi4uYXJncyApID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25QYWdpbmF0aW9uVXBkYXRlZC5lbWl0KGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub25TcGxpZGVFdmVudC5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncGFnaW5hdGlvbjp1cGRhdGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCduYXZpZ2F0aW9uOm1vdW50ZWQnLCAoIC4uLmFyZ3MgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTmF2aWdhdGlvbk1vdW50ZWQuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ25hdmlnYXRpb246bW91bnRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbignYXV0b3BsYXk6cGxheScsICggLi4uYXJncyApID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25BdXRvcGxheVBsYXkuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2F1dG9wbGF5OnBsYXknLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ2F1dG9wbGF5OnBhdXNlJywgKCAuLi5hcmdzICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkF1dG9wbGF5UGF1c2UuZW1pdChhcmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3BsaWRlRXZlbnQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2F1dG9wbGF5OnBhdXNlJyxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdhdXRvcGxheTpwbGF5aW5nJywgKCAuLi5hcmdzICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkF1dG9wbGF5UGxheWluZy5lbWl0KGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub25TcGxpZGVFdmVudC5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYXV0b3BsYXk6cGxheWluZycsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbignbGF6eWxvYWQ6bG9hZGVkJywgKCAuLi5hcmdzICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkxhenlsb2FkTG9hZGVkLmVtaXQoYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNwbGlkZUV2ZW50LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsYXp5bG9hZDpsb2FkZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxpZGVJbnN0YW5jZSgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BsaWRlO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdW50U3BsaWRlSW5zdGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc3BsaWRlLm1vdW50KCk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW91bnRTcGxpZGVJbnN0YW5jZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3JlbW91bnRTcGxpZGVJbnN0YW5jZScpO1xyXG4gICAgICAgIHRoaXMuc3BsaWRlLmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLm1vdW50U3BsaWRlSW5zdGFuY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsaWRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaWRlLmRlc3Ryb3kodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIjxkaXYgI3NwbGlkZUVsZW1lbnQgY2xhc3M9XCJzcGxpZGVcIiBbbmdDbGFzc109XCJjb250YWluZXJDbGFzc1wiPlxyXG4gICAgPGRpdiBjbGFzcz1cInNwbGlkZV9fdHJhY2tcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwic3BsaWRlX19saXN0XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGxpZGVfX3NsaWRlXCIgKm5nRm9yPVwibGV0IHNsaWRlIG9mIHNsaWRlcztcIj5cclxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cInNsaWRlLnNsaWRlQ29udGVudFwiIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInNsaWRlLnNsaWRlQ29udGVudFwiPjwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG4iXX0=